# Maintainer: Conrad Hoffmann <ch@bitfehler.net>
pkgname=dracut
pkgver=056
pkgrel=0
pkgdesc="An event driven initramfs infrastructure"
url="https://dracut.wiki.kernel.org/index.php/Main_Page"
arch="all"
license="GPL-2.0-or-later"
depends="eudev"
makedepends="fts-dev kmod-dev pkgconfig"
subpackages="$pkgname-dev $pkgname-doc $pkgname-bash-completion"
source="https://mirrors.edge.kernel.org/pub/linux/utils/boot/dracut/dracut-$pkgver.tar.xz"

build() {
	./configure --prefix="$pkgdir/usr" --sysconfdir="$pkgdir/etc"
	CFLAGS="$CFLAGS -D__GLIBC_PREREQ=" make
}

bash_completion() {
	amove usr/share/bash-completion
}

check() {
	# There is a test suite, but it requires root/sudo:
	#make check
	:
}

package() {
	make install
}

sha512sums="
19268763e128984d20cab766bbdf2de12fe534ce2562fc688203099ef9b4cf83d0ccd2129499c70cdc6dd4ad53f0ffc2f3378eff5b8a15fda27c23b20f903df2  dracut-056.tar.xz
"
