# Maintainer: Drew DeVault <sir@cmpwn.com>
pkgname=himitsu
pkgver="0_git20220616"
_commit=58972fea6dadf87521f0030a296025693059fe07
pkgrel=0
pkgdesc="A secret storage manager"
url="https://himitsustore.org"
arch="x86_64 aarch64" # Hare
license="GPL-3.0-only"
makedepends="hare scdoc"
subpackages="$pkgname-doc $pkgname-dev"
source="
	$pkgname-$_commit.tar.gz::https://git.sr.ht/~sircmpwn/himitsu/archive/$_commit.tar.gz
"
builddir="$srcdir/$pkgname-$_commit"

build() {
	make -j1 PREFIX=/usr
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" PREFIX=/usr install
}

dev() {
	mkdir -p "$subpkgdir"/usr/src/
	mv "$pkgdir"/usr/src/hare "$subpkgdir"/usr/src/
	rm -r "$pkgdir"/usr/src
}

sha512sums="
344970a12b906f6825029fe43f818a859db7030c1e3f1ccbb1b0f4b2a84833485007f613131a75152b97e16e16c4178dfbc38513b9afa5fed57b3fa71f895cab  himitsu-58972fea6dadf87521f0030a296025693059fe07.tar.gz
"
